<table>
  <thead>
    <tr>
      <th>Aspect / Step</th>
      <th><strong>Basic</strong><br><code>dino_segmentation_basic.ipynb</code></th>
      <th><strong>Heuristic</strong><br><code>dino_segmentation_heuristic.ipynb</code></th>
      <th><strong>Advanced U2Seg</strong><br><code>dino_segmentation_advanced_u2seg.ipynb</code></th>
      <th>Main Difference</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>Goal</td><td>Unsupervised silkworm <strong>semantic + instance</strong> segmentation</td><td>Same goal, but <strong>auto-detects classes by color</strong></td><td>Unified <strong>two-branch</strong> unsupervised segmentation (instances + semantics) then merges</td><td>More automation &amp; modularity</td></tr>
    <tr><td>Feature extractor</td><td>DINOv2 ViT-B/14 via <code>torch.hub</code></td><td>Same</td><td>Same</td><td>No change</td></tr>
    <tr><td>Input resize</td><td>518×518</td><td>518×518</td><td>518×518</td><td>Same</td></tr>
    <tr><td>Patch grid</td><td>37×37 tokens</td><td>37×37</td><td>37×37</td><td>Same</td></tr>
    <tr><td>Semantic clustering method</td><td>Spectral clustering (&tau; = 0.12) → KMeans (k = 3)</td><td>Same</td><td>Same</td><td>Same base algorithm</td></tr>
    <tr><td>Class naming</td><td><strong>Hard-coded</strong>: cluster 0 = worms</td><td><strong>HSV heuristic</strong>: low saturation = worms; hue≈60 = leaves; rest = bg</td><td>Same HSV heuristic</td><td>Manual → automatic</td></tr>
    <tr><td>Instance trigger</td><td>Only on worm mask</td><td>Same</td><td>Build many class-agnostic instances first, then classify</td><td>U2Seg splits first, labels later</td></tr>
    <tr><td>Instance split</td><td>Distance transform + watershed on worm mask</td><td>Same</td><td>Same watershed <em>after</em> instance clustering</td><td>Extra clustering stage in U2Seg</td></tr>
    <tr><td>Instance pre-groups</td><td>&#10060;</td><td>&#10060;</td><td>&#9989; ~150 spectral clusters (raw instances)</td><td>New in U2Seg</td></tr>
    <tr><td>Min object size</td><td>150 px</td><td>150 px</td><td>100 px (default)</td><td>Slight tweak</td></tr>
    <tr><td><code>min_distance</code></td><td>12 px</td><td>12 px</td><td>12 px</td><td>Same</td></tr>
    <tr><td>Semantic classes</td><td>3</td><td>3</td><td>3</td><td>Same</td></tr>
    <tr><td>Instance clusters</td><td>N/A</td><td>N/A</td><td>~150 (configurable)</td><td>Only U2Seg</td></tr>
    <tr><td>Merge rule</td><td>N/A (only worms instanced)</td><td>N/A</td><td>Majority-overlap vote instance ↔ semantic</td><td>New in U2Seg</td></tr>
    <tr><td>Visualization panels</td><td>3: Original / Semantic / Instance</td><td>3: Original / Semantic / Instance</td><td>4: Original / Raw instances / Semantic / Final merged</td><td>Extra panel in U2Seg</td></tr>
    <tr><td>Output dict</td><td><code>instance_masks</code>, <code>semantic_map</code>, <code>label_to_name_map</code>, <code>silkworm_count</code></td><td>Same, names auto-derived</td><td><code>raw_instances</code>, <code>classified_instances</code>, <code>category_counts</code>, <code>semantic_map</code>, <code>semantic_names</code></td><td>Richer outputs</td></tr>
    <tr><td>Folders</td><td>Not emphasized</td><td>Created at start</td><td>Created</td><td>Minor housekeeping</td></tr>
    <tr><td>Saving results</td><td>Plots only</td><td>Plots only</td><td>Paths prepared (still plots unless extended)</td><td>Ready for saving</td></tr>
    <tr><td>Hyperparameters</td><td>Few (&tau;, <code>n_classes</code>, <code>min_obj_size</code>, …)</td><td>Same + HSV thresholds implicit</td><td>More (separate &tau;/k for instances vs semantics)</td><td>Finer control</td></tr>
    <tr><td>Naming robustness</td><td>Fragile (cluster ID swap)</td><td>More robust (color rules)</td><td>Color rules + instance vote</td><td>Increasing robustness</td></tr>
    <tr><td>Pipeline name</td><td>—</td><td>—</td><td><code>U2SegUnified</code></td><td>Formalized class</td></tr>
    <tr><td>Code organization</td><td>Straightforward classes</td><td>Same + labeling function</td><td>Specialized classes + merger</td><td>More modular &amp; layered</td></tr>
    <tr><td>Compute cost</td><td>Moderate</td><td>Moderate</td><td>Slightly higher (extra clustering)</td><td>Extra spectral step</td></tr>
    <tr><td>Worm counting</td><td>After worm-mask watershed</td><td>After worm-mask watershed</td><td>After merge → per-class counts</td><td>U2Seg can count any class</td></tr>
  </tbody>
</table>
